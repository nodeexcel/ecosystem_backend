generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum Role {
  Admin
  Guest
  Member
}

enum Subscription {
  pro
  business
  team
  enterprise
}

model User {
  id                 Int       @id @default(autoincrement())
  firstName          String?   @db.VarChar(50)
  lastName           String?   @db.VarChar(50)
  phoneNumber        String?   @db.VarChar(20)
  image              String?   @db.VarChar(100)
  email              String    @unique @db.VarChar(100)
  password           String?   @db.VarChar(255)
  city               String?   @db.VarChar(30)
  company            String?   @db.VarChar(50)
  country            String?   @db.VarChar(50)
  role               Role      @default(Admin)
  subscriptionType   Subscription?
  numberOfTeamMembers Int  @default(0)
  paymentId          String?   @db.VarChar(100)
  activeProfile      Boolean   @default(false)
  isProfileComplete  Boolean   @default(false)
  stripeCustomerId   String?   @db.VarChar(50)
  subscriptionStatus String?   @db.VarChar(50)
  subscriptionId String?  @db.VarChar(100)
  refreshToken String? @db.VarChar(255)
  otp                String?   @db.VarChar(6)
  createdAt          DateTime  @default(now()) @map("created_at")

  @@map("users")
}


model PasswordResetToken {
  id        Int      @id @default(autoincrement())
  email     String   @db.VarChar(100)
  token     String   @unique @db.VarChar(255)
  expiresAt DateTime
  createdAt DateTime @default(now()) @map("created_at")

  @@map("password_reset_tokens")
}



model teamMembers{
   id Int @id @default(autoincrement())
   memberId Int 
   adminId Int   
   role Role
   createdAt  DateTime @default(now()) @map("created_at")
}


model teamInvite {
  id         Int      @id @default(autoincrement())
  email      String   @db.VarChar(100)
  token      String   @unique @db.VarChar(255)
  adminId    Int
  role     Role
  expiresAt  DateTime
  accepted   Boolean  @default(false)
  createdAt  DateTime @default(now())

  @@map("invite_tokens")
}


model transactionHistory {
  id               Int      @id @unique @default(autoincrement())
  userId           Int
  paymentId        String   @db.VarChar(100)
  amountPaid       Float
  email            String   @db.VarChar(50)
  status           String   @db.VarChar(50)
  paymentMethod    String?  @db.VarChar(50)
  subscriptionType Subscription?
  receiptUrl       String?  @db.VarChar(255)
  currency  String?
  transactionDate  DateTime @default(now())
  createdAt        DateTime @default(now()) @map("created_at")

  @@map("transaction_history")
}
